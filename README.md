COMBinator - FXM Data Converter
===================================

A standalone command line tool that converts files produced by [MenloSystems](https://www.menlosystems.com) optical frequency combs into a more user friendly format.
Furthermore it performs some basic checking (optional) of the data and calculates the laser frequency to be calibrated. It is primarly intended to be used in conjunction with the BEV fibre combs and thus can not handle some of the older data files generated by the Ti:Saphire comb setup.

Up to 8 frequency and 2 voltages can make up a single data sample of the input files. The meaning of the channels is quite specific to the BEV setup. The frequency values of a single comb can be in channels 1 - 4 or 5 - 8 (or both, each group representing a FXM counter), the remaining values are the voltage readings. (This may need an update due to the new ULN comb!)

## Command Line Usage:  

```
COMBinator inputfile [outputfile [plotfile]] [options]
```

## Options:  

`--quiet (-q)` : Quiet mode. No screen output (except for errors).

`--comment` : User supplied string to be included in the output file metadata.

`--noheader` : Suppress header in output file.

`--noaux` : Suppress generation of the plot file.

`--MJD` : Plotfile uses Modified Julian Date instead of seconds.

`--FXM` : Number of FXM counter to be used (1 or 2).

`--comb` : Frequency comb type which produced the input file, supported values are:

1: BEV FC1500-0-053 fiber comb, frequency doubled output

2: BEV FC1500-0-053 fiber comb, fundamental output

3: BEV FC8003/01 Ti:Sa comb

4: CMI FC8004 Ti:Sa comb

5: BEV FC1500-250-ULN fiber comb, fundamental output

6: BEV FC1500-250-ULN fiber comb, frequency doubled output

other: generic comb

### Options to set filter parameters

`--nofilter` : Suppress outlier checking.

`--frep_set` : Setpoint for downmixed repetition frequency, in Hz.

`--frep_tol` : Tolerance for the downmixed repetition frequency, in Hz.

`--foff_tol` : Tolerance for the offest frequency, in Hz.

`--cyc_tol` :  Tolerance for cycle slip detection, in Hz

### Options for laser frequency evaluation

`--mode (-m)` : Mode number.

`--pb` : Beat frequency must be taken positive.

`--nb` : Beat frequency must be taken negative.

`--po` : Offset frequency must be taken positive.

`--nb` : Offset frequency must be taken negative.

`--target (-t)` : Target (or expected) laser frequency, in Hz

`--auto633` : Assume one of the iodine stabilized He-Ne laser (633 nm) frequencies published by CCL.


## Side effects and caveats

* All data is stored in advance to the calculation of statistical parameters. This may throw an out of memory exception;

* tbc;

* tbc.

## Dependencies  
Bev.IO.MenloReader:  https://github.com/matusm/Bev.IO.MenloReader 

Bev.UI: https://github.com/matusm/Bev.UI

CommandLineParser: https://github.com/commandlineparser/commandline 
